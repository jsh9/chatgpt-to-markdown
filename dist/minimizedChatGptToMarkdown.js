(()=>{var e,t,n={843:e=>{e.exports={HORIZONTAL_RULE:"----------\n\n",INLINE_ELEMENTS:["CODE","STRONG","EM","DEL","SPAN","SUB","SUP","B","I","U","S"],PARAGRAPH_ELEMENTS:["P","LI","STRONG","EM","DEL","SPAN","B","I","U","S"],HEADER_ELEMENTS:["H1","H2","H3","H4","H5","H6"],LIST_ELEMENTS:["OL","UL"],BLOCK_ELEMENTS:["P","LI","DIV"],SPACES_PER_LEVEL:3,KATEX_CLASSES:{DISPLAY:"katex-display",KATEX:"katex",HTML:"katex-html",MATHML:"katex-mathml"}}},342:(e,t,n)=>{var r=n(943);e.exports={parseBlockQuote:function e(t,n,a){for(var o="\n",i=function(e){return" ".repeat(3*e)}(n),l=r.makeQuoteHead(i),u=t.childNodes,s=0;s<u.length;s++){var c=u[s];"BLOCKQUOTE"===c.tagName?o+=e(c,n,a):o+="\n"+a(c,n+1)+"\n"}var f=l+r.trimAndAddPaddingNewlines(o).replace(/\n/g,l),d=r.replaceQuoteHeadFromEnd(f);return r.removeRedundantQuoteHeads(d)}}},136:e=>{function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports={parseInlineCode:function(e){return"`"+e.textContent+"`"},parseCodeBlock:function(e){var r,a=e.textContent.split("Copy code"),o=a[0].trim(),i=a[1].trimEnd().split("\n"),l=1/0,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(u)throw i}}}}(i);try{for(u.s();!(r=u.n()).done;){var s=r.value;if(0!==s.trim().length){var c=s.match(/^\s*/)[0].length;c<l&&(l=c)}}}catch(e){u.e(e)}finally{u.f()}isFinite(l)||(l=0);var f=l>0?i.map((function(e){return e.slice(Math.min(l,e.length))})):i,d=f.map((function(e){return e.match(/^\s*/)[0].length})).filter((function(e){return e>0})),p=f;if(d.length>0){var E=Math.min.apply(Math,t(d));if(E>4&&E%4==0){var m=E/4;p=f.map((function(e){var t=e.match(/^(\s*)(.*)$/),n=t[1].length;return 0===n?t[2]:" ".repeat(Math.round(n/m))+t[2]}))}}var g=p.map((function(e){var t=e.match(/^(\s*)(.*)$/)[2];return/^[-*>]/.test(t)?t:e})).join("\n");return"```".concat(o,"\n").concat(g,"\n```\n")}}},758:e=>{function t(e){if(e&&e.dataset&&"string"==typeof e.dataset.messageAuthorRole){var t=e.dataset.messageAuthorRole.toLowerCase();if("user"===t||"assistant"===t)return t}return null}e.exports={hasMessageAuthorRole:function(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&(void 0!==e.dataset&&"string"==typeof e.dataset.messageAuthorRole&&e.dataset.messageAuthorRole.length>0)},getDatasetRole:t,getMessageContainer:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;if(t(e))return e;if("function"==typeof e.closest){var n=e.closest("[data-message-author-role]");if(n)return n}return null},getRoleFromClassName:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;var t="string"==typeof e.className?e.className:"";return"empty:hidden"===t?"user":t.includes("markdown prose")?"assistant":null}}},427:(e,t,n)=>{function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw i}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(61),u=n(758),s=u.getDatasetRole,c=u.getMessageContainer,f=u.getRoleFromClassName,d=new WeakSet;function p(e){return"user"===e?l()+"\n\n# _Question_\n\n":"assistant"===e?"\n\n# _Answer_\n\n":""}e.exports={resetHeaderHandledMessages:function(){d=new WeakSet},maybeAddMessageHeading:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return"";var t=s(e);if(t){if(!d.has(e)){var n=p(t);if(n)return d.add(e),n}return""}var r=f(e);if(!r)return"";var a=c(e)||e;if(d.has(a))return"";var o=p(r);return o&&d.add(a),o},parseHeader:function(e,t,n){var o=parseInt(t.charAt(t.length-1),10),i=function(e){for(var t="",n=0;n<e;n++)t+="#";return t}(o),l=n(e.outerHTML);return l=function(e){for(var t=e.trim(),n=!0,o=[["**","**"],["__","__"],["*","*"],["_","_"]];n;){n=!1;var i,l=a(o);try{for(l.s();!(i=l.n()).done;){var u=r(i.value,2),s=u[0],c=u[1];t.startsWith(s)&&t.endsWith(c)&&t.length>s.length+c.length&&(t=t.slice(s.length,t.length-c.length).trim(),n=!0)}}catch(e){l.e(e)}finally{l.f()}}return t}(l),o>=2&&(l=function(e){for(var t=null,n=e;t!==n;)t=n,n=n.replace(/\*\*(.*?)\*\*/g,"$1");for(t=null;t!==n;)t=n,n=n.replace(/__(.*?)__/g,"$1");return n}(l)),i+" "+l}}},836:(e,t,n)=>{var r=n(843);e.exports={shouldIgnoreKatexSubtree:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;var t=("string"==typeof e.className?e.className:"").split(/\s+/).filter(Boolean);return!(!t.includes(r.KATEX_CLASSES.HTML)&&!t.includes(r.KATEX_CLASSES.MATHML))},parseKatexNode:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;var t=("string"==typeof e.className?e.className:"").split(/\s+/).filter(Boolean),n=t.includes(r.KATEX_CLASSES.KATEX),a=t.includes(r.KATEX_CLASSES.DISPLAY);if(!n&&!a)return null;var o=e.parentElement,i=Boolean(o&&o.classList&&"function"==typeof o.classList.contains&&o.classList.contains(r.KATEX_CLASSES.DISPLAY));if(n&&i&&!a)return null;var l=e.querySelector('annotation[encoding="application/x-tex"]');if(!l||"string"!=typeof l.textContent)return null;var u=l.textContent.trim();return 0===u.length?null:a||i?{markdown:"$$\n"+u+"\n$$",type:"display"}:{markdown:"$".concat(u,"$"),type:"inline"}}}},793:(e,t,n)=>{var r=n(843);function a(e){if(void 0===e)throw new Error("Please pass in `level` to `getSpaces()`");var t=e*r.SPACES_PER_LEVEL;return" ".repeat(t)}e.exports={parseOrderedList:function(e,t,n){for(var r="\n",o=a(t),i=e.childNodes,l=0;l<i.length;l++){var u=i[l];u.nodeType===Node.ELEMENT_NODE&&"LI"===u.tagName&&(r+="".concat(o).concat(l+e.start,". ").concat(n(u,t+1),"\n"))}return r+"\n"},parseUnorderedList:function(e,t,n){for(var r="\n",o=a(t),i=e.childNodes,l=0;l<i.length;l++){var u=i[l];u.nodeType===Node.ELEMENT_NODE&&"LI"===u.tagName&&(r+="".concat(o,"- ").concat(n(u,t+1),"\n"))}return r+"\n"}}},273:e=>{e.exports={parseTable:function(e,t){var n="\n";return e.childNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE&&("THEAD"===e.tagName||"TBODY"===e.tagName)){var r="",a=0;if(e.childNodes.forEach((function(n){if(n.nodeType===Node.ELEMENT_NODE&&"TR"===n.tagName){var o="";n.childNodes.forEach((function(n){n.nodeType!==Node.ELEMENT_NODE||"TD"!==n.tagName&&"TH"!==n.tagName||(o+="| ".concat(t(n.outerHTML)," "),"THEAD"===e.tagName&&a++)})),r+="".concat(o,"|\n")}})),n+=r,"THEAD"===e.tagName){var o="| ".concat(Array(a).fill("---").join(" | ")," |\n");n+=o}}})),n}}},943:e=>{e.exports={replaceQuoteHeadFromEnd:function(e){return e.endsWith("\n> ")?e.slice(0,-3)+"\n":e},makeQuoteHead:function(e){return"\n"+e+"> "},trimAndAddPaddingNewlines:function(e){return e.trim()+"\n"},removeRedundantQuoteHeads:function(e){return e.replaceAll(/(\n> ){3,}/g,"\n> \n> ")}}},961:(e,t,n)=>{var r=n(61);e.exports=function(e){return t=function(e){return e.trim()+"\n"}(function(e){return e.replace(/\n{3,}/g,"\n\n")}(function(e){return e.substring(r().length)}(e))),n=t.split("\n"),a=!1,n.map((function(e){if(e.startsWith("```"))return a=!a,e.trimRight();if(a)return e;var t=e.trimRight();return/^\s*[-*]\s/.test(t)||/^\s*\d+\.\s/.test(t)||/^\s*>/.test(t)?t:t.trimStart()})).join("\n");var t,n,a}},746:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e,n){e.save=function(e){var r="text/plain",a=document.getElementsByTagName("title")[0].innerText,o=a?a.trim().replace(/["]/g,"'").replace(/[\\/:*?"<>|]/g,"-").replace(/\.$/,""):"chatGPT";"json"===n.toLowerCase()?(o+=".json",r="text/json","object"===t(e)&&(e=JSON.stringify(e,void 0,4))):"md"===n.toLowerCase()&&(o+=".md");var i=new Blob([e],{type:r}),l=document.createElement("a");l.download=o,l.href=window.URL.createObjectURL(i),l.dataset.downloadurl=[r,l.download,l.href].join(":");var u=new MouseEvent("click",{canBubble:!0,cancelable:!1,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});l.dispatchEvent(u)}}},61:(e,t,n)=>{var r=n(843);e.exports=function(){return r.HORIZONTAL_RULE}},763:(e,t,n)=>{var r=n(794),a=n(961),o=n(758).hasMessageAuthorRole,i=n(427).resetHeaderHandledMessages;e.exports=function(e){var t="";i();for(var n=0;n<e.length;n++){var l=e[n],u=l;o(u)||(u=l.firstElementChild||l.firstChild),u&&(t+=r(u,0))}return a(t)}},794:(e,t,n)=>{var r=n(423),a=n(61),o=n(843),i=n(427),l=i.maybeAddMessageHeading,u=i.parseHeader,s=n(836),c=s.shouldIgnoreKatexSubtree,f=s.parseKatexNode,d=n(793),p=d.parseOrderedList,E=d.parseUnorderedList,m=n(136),g=m.parseInlineCode,v=m.parseCodeBlock,y=n(273).parseTable,h=n(342).parseBlockQuote;function N(e,t){var n="";if(e.nodeType===Node.ELEMENT_NODE)if(n+=l(e),"OL"===e.tagName)n+=p(e,t,N);else if("UL"===e.tagName)n+=E(e,t,N);else{if(!o.BLOCK_ELEMENTS.includes(e.tagName))throw new Error("Edge case encountered: node.tagName: ".concat(e.tagName,"\n")+"Please contact the author.");n+=function(e,t){for(var n="",r=e.childNodes,a=0;a<r.length;a++){var o=r[a];o.nodeType==Node.TEXT_NODE&&(n+=T(o)),o.nodeType===Node.ELEMENT_NODE&&(n+=L(o,t))}return n}(e,t)}return n}function T(e){var t=e.textContent;if("string"!=typeof t)return"";if(!/\r?\n/.test(t)){var n=t.replace(/\u00a0/g," "),r=/^\s/.test(n),a=/\s$/.test(n);return 0===(n=n.trim()).length?"":(r&&(n=" "+n),a&&(n+=" "),n)}var o=t.replace(/\u00a0/g," ").split(/\r?\n/).map((function(e){return e.trim()})).join("\n").trim();return o.length>0?o:""}function L(e,t){var n=e.tagName,i="",l=!1;if(c(e))return"";var s=f(e);return s?(i+=s.markdown,"display"===s.type&&(i+="\n\n"),i):(o.HEADER_ELEMENTS.includes(n)?(i+=u(e,n,r),l=!0):o.PARAGRAPH_ELEMENTS.includes(n)?(i+=r(e.outerHTML),l=!0):"SUB"===n||"SUP"===n?(i+=e.outerHTML,l=!0):"TIME"===n?l=!0:"BLOCKQUOTE"===n?(i+=h(e,t,N),l=!0):"OL"===n?(i+=p(e,t,N),l=!0):"UL"===n?(i+=E(e,t,N),l=!0):"PRE"===n?(i+=v(e),l=!0):"TABLE"===n?(i+=y(e,r),l=!0):"CODE"===n?(i+=g(e),l=!0):"HR"===n&&(i+=a(),l=!0),l||(i+=N(e,t)),o.INLINE_ELEMENTS.includes(n)||(i+="\n\n"),i)}e.exports=N},423:e=>{function t(e){var t=e.querySelector('annotation[encoding="application/x-tex"]');if(!t||"string"!=typeof t.textContent)return null;var n=t.textContent.trim();return n.length>0?n:null}function n(e,t){return e.classList&&"function"==typeof e.classList.contains&&e.classList.contains(t)}function r(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&(!!n(e,"katex-display")||n(e,"katex")&&"block"===e.getAttribute("display"))}e.exports=function(e){return function(e){var a=document.createElement("div");a.innerHTML=e;var o=[];function i(e){if(e.nodeType!==Node.TEXT_NODE){if(e.nodeType===Node.ELEMENT_NODE)if(r(e)){var a=t(e);if(null!==a){var l=function(e){var t=e.parentElement;for(;t;){if("LI"===t.tagName)return"  ";t=t.parentElement}return""}(e);o.push(l+"$$\n"+a+"\n"+l+"$$")}}else if(!function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;for(var t=["katex-html","katex-mathml","katex-svg"],a=0;a<t.length;a++)if(n(e,t[a]))return!0;if(n(e,"katex")){var o=e.parentElement;if(o&&r(o))return!0}return!1}(e))if(function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;if(!n(e,"katex"))return!1;if(r(e))return!1;var t=e.parentElement;if(t&&r(t))return!1;return!0}(e)){var u=t(e);null!==u&&o.push("$".concat(u,"$"))}else if("BR"!==e.tagName)for(var s=0;s<e.childNodes.length;s++)i(e.childNodes[s]);else o.push("\n")}else o.push(e.textContent)}return i(a),o.join("").trim()}(function(e){var t=/<a href="([^"]+)"[^>]*>(.*?)<\/a>/.exec(e);if(null===t)return e;var n=t[1],r=t[2],a=e.substr(0,t.index),o=e.substr(t.index+t[0].length);return a+"["+r+"]("+n+")"+o}(e).replace(/<p>|<\/p>|<li>|<\/li>|<th>|<\/th>|<td>|<\/td>/gi,"").replace(/<strong\b[^>]*>/gi,"**").replace(/<\/strong>/gi,"**").replace(/<b\b[^>]*>/gi,"**").replace(/<\/b>/gi,"**").replace(/<em\b[^>]*>/gi,"_").replace(/<\/em>/gi,"_").replace(/<i\b[^>]*>/gi,"_").replace(/<\/i>/gi,"_").replace(/<del\b[^>]*>/gi,"~~").replace(/<\/del>/gi,"~~").replace(/<code\b[^>]*>/gi,"`").replace(/<\/code>/gi,"`"))}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}e=a(746),t=a(763),function(){var n=document.querySelectorAll("[data-message-author-role]");n&&0!==n.length||(n=document.querySelectorAll("[class*='min-h-[20px]']"));var r=t(n);"string"==typeof r&&r.trim().length>0&&(e(console,"md"),console.save(r))}()})();