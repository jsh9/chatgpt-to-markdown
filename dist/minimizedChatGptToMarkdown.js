(()=>{var e,t,n={943:e=>{e.exports={replaceQuoteHeadFromEnd:function(e){return e.endsWith("\n> ")?e.slice(0,-3)+"\n":e},makeQuoteHead:function(e){return"\n"+e+"> "},trimAndAddPaddingNewlines:function(e){return e.trim()+"\n"},removeRedundantQuoteHeads:function(e){return e.replaceAll(/(\n> ){3,}/g,"\n> \n> ")}}},961:(e,t,n)=>{var r=n(61);e.exports=function(e){return t=function(e){return e.trim()+"\n"}(function(e){return e.replace(/\n{3,}/g,"\n\n")}(function(e){return e.substring(r().length)}(e))),n=t.split("\n"),a=!1,n.map((function(e){if(e.startsWith("```"))return a=!a,e.trimRight();if(a)return e;var t=e.trimRight();return/^\s*[-*]\s/.test(t)||/^\s*\d+\.\s/.test(t)||/^\s*>/.test(t)?t:t.trimStart()})).join("\n");var t,n,a}},746:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e,n){e.save=function(e){var r="text/plain",a=document.getElementsByTagName("title")[0].innerText,o=a?a.trim().replace(/["]/g,"'").replace(/[\\/:*?"<>|]/g,"-").replace(/\.$/,""):"chatGPT";"json"===n.toLowerCase()?(o+=".json",r="text/json","object"===t(e)&&(e=JSON.stringify(e,void 0,4))):"md"===n.toLowerCase()&&(o+=".md");var i=new Blob([e],{type:r}),u=document.createElement("a");u.download=o,u.href=window.URL.createObjectURL(i),u.dataset.downloadurl=[r,u.download,u.href].join(":");var l=new MouseEvent("click",{canBubble:!0,cancelable:!1,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});u.dispatchEvent(l)}}},61:e=>{e.exports=function(){return"----------\n\n"}},763:(e,t,n)=>{var r=n(794),a=n(961);e.exports=function(e){var t,n="";"function"==typeof r.resetHeaderHandledMessages&&r.resetHeaderHandledMessages();for(var o=0;o<e.length;o++){var i=e[o],u=i;(t=u)&&t.nodeType===Node.ELEMENT_NODE&&void 0!==t.dataset&&"string"==typeof t.dataset.messageAuthorRole&&t.dataset.messageAuthorRole.length>0||(u=i.firstElementChild||i.firstChild),u&&(n+=r(u,0))}return a(n)}},794:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return u}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(423),c=n(61),s=n(943),f=new WeakSet;function d(e){if(e&&e.dataset&&"string"==typeof e.dataset.messageAuthorRole){var t=e.dataset.messageAuthorRole.toLowerCase();if("user"===t||"assistant"===t)return t}return null}function m(e){return"user"===e?c()+"\n\n# _Question_\n\n":"assistant"===e?"\n\n# _Answer_\n\n":""}function p(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return"";var t=d(e);if(t){if(!f.has(e)){var n=m(t);if(n)return f.add(e),n}return""}var r="string"==typeof e.className?e.className:"",a=null;if("empty:hidden"===r?a="user":r.includes("markdown prose")&&(a="assistant"),!a)return"";var o=function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;if(d(e))return e;if("function"==typeof e.closest){var t=e.closest("[data-message-author-role]");if(t)return t}return null}(e)||e;if(f.has(o))return"";var i=m(a);return i&&f.add(o),i}function g(e,t){var n="";if(e.nodeType===Node.ELEMENT_NODE){n+=p(e);var r=e.childNodes;if("OL"===e.tagName)n+=E(e,t);else if("UL"===e.tagName)n+=N(e,t);else{if(!["P","LI","DIV"].includes(e.tagName))throw new Error("Edge case encountered: node.tagName: ".concat(e.tagName,"\n")+"Please contact the author.");for(var a=0;a<r.length;a++){var o=r[a];if(o.nodeType==Node.TEXT_NODE){var i=o.textContent;if("string"==typeof i){if(!/\r?\n/.test(i)){var u=i.replace(/\u00a0/g," "),l=/^\s/.test(u),s=/\s$/.test(u);if(0===(u=u.trim()).length)continue;l&&(u=" "+u),s&&(u+=" "),n+=u;continue}var f=i.replace(/\u00a0/g," ").split(/\r?\n/).map((function(e){return e.trim()})).join("\n").trim();f.length>0&&(n+=f)}}if(o.nodeType===Node.ELEMENT_NODE){var d=o.tagName,m=!1;if(["H1","H2","H3","H4","H5","H6"].includes(d)&&(n+=v(o,d),m=!0),["P","LI","STRONG","EM","DEL","SPAN","B","I","U","S"].includes(d)&&(n+=h(o),m=!0),"SUB"!==d&&"SUP"!==d||(n+=o.outerHTML,m=!0),"TIME"===d){m=!0;continue}"BLOCKQUOTE"===d&&(n+=y(o,t),m=!0),"OL"===d&&(n+=E(o,t),m=!0),"UL"===d&&(n+=N(o,t),m=!0),"PRE"===d&&(n+=T(o),m=!0),"TABLE"===d&&(n+=L(o),m=!0),"CODE"===d&&(n+=b(o),m=!0),"HR"===d&&(n+=c(),m=!0),m||(n+=g(o,t)),["CODE","STRONG","EM","DEL","SPAN","SUB","SUP","B","I","U","S"].includes(d)||(n+="\n\n")}}}}return n}function h(e){return l(e.outerHTML)}function v(e,t){var n=parseInt(t.charAt(t.length-1),10),r=function(e){for(var t="",n=0;n<e;n++)t+="#";return t}(n),i=l(e.outerHTML);return i=function(e){for(var t=e.trim(),n=!0,r=[["**","**"],["__","__"],["*","*"],["_","_"]];n;){n=!1;var i,u=o(r);try{for(u.s();!(i=u.n()).done;){var l=a(i.value,2),c=l[0],s=l[1];t.startsWith(c)&&t.endsWith(s)&&t.length>c.length+s.length&&(t=t.slice(c.length,t.length-s.length).trim(),n=!0)}}catch(e){u.e(e)}finally{u.f()}}return t}(i),n>=2&&(i=function(e){var t=null,n=e;for(;t!==n;)t=n,n=n.replace(/\*\*(.*?)\*\*/g,"$1");t=null;for(;t!==n;)t=n,n=n.replace(/__(.*?)__/g,"$1");return n}(i)),r+" "+i}function y(e,t){for(var n="\n",r=w(t),a=s.makeQuoteHead(r),o=e.childNodes,i=0;i<o.length;i++){var u=o[i];"BLOCKQUOTE"===u.tagName?n+=y(u,t):n+="\n"+g(u,t+1)+"\n"}var l=a+s.trimAndAddPaddingNewlines(n).replace(/\n/g,a),c=s.replaceQuoteHeadFromEnd(l);return s.removeRedundantQuoteHeads(c)}function E(e,t){for(var n="\n",r=w(t),a=e.childNodes,o=0;o<a.length;o++){var i=a[o];i.nodeType===Node.ELEMENT_NODE&&"LI"===i.tagName&&(n+="".concat(r).concat(o+e.start,". ").concat(g(i,t+1),"\n"))}return n+"\n"}function N(e,t){for(var n="\n",r=w(t),a=e.childNodes,o=0;o<a.length;o++){var i=a[o];i.nodeType===Node.ELEMENT_NODE&&"LI"===i.tagName&&(n+="".concat(r,"- ").concat(g(i,t+1),"\n"))}return n+"\n"}function T(e){var t,n=e.textContent.split("Copy code"),a=n[0].trim(),i=n[1].trimEnd().split("\n"),u=1/0,l=o(i);try{for(l.s();!(t=l.n()).done;){var c=t.value;if(0!==c.trim().length){var s=c.match(/^\s*/)[0].length;s<u&&(u=s)}}}catch(e){l.e(e)}finally{l.f()}isFinite(u)||(u=0);var f=u>0?i.map((function(e){return e.slice(Math.min(u,e.length))})):i,d=f.map((function(e){return e.match(/^\s*/)[0].length})).filter((function(e){return e>0})),m=f;if(d.length>0){var p=Math.min.apply(Math,r(d));if(p>4&&p%4==0){var g=p/4;m=f.map((function(e){var t=e.match(/^(\s*)(.*)$/),n=t[1].length;return 0===n?t[2]:" ".repeat(Math.round(n/g))+t[2]}))}}var h=m.map((function(e){var t=e.match(/^(\s*)(.*)$/)[2];return/^[-*>]/.test(t)?t:e})),v=h.join("\n");return"```".concat(a,"\n").concat(v,"\n```\n")}function b(e){return"`"+e.textContent+"`"}function L(e){var t="\n";return e.childNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE&&("THEAD"===e.tagName||"TBODY"===e.tagName)){var n="",r=0;if(e.childNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE&&"TR"===t.tagName){var a="";t.childNodes.forEach((function(t){t.nodeType!==Node.ELEMENT_NODE||"TD"!==t.tagName&&"TH"!==t.tagName||(a+="| ".concat(l(t.outerHTML)," "),"THEAD"===e.tagName&&r++)})),n+="".concat(a,"|\n")}})),t+=n,"THEAD"===e.tagName){var a="| ".concat(Array(r).fill("---").join(" | ")," |\n");t+=a}}})),t}function w(e){if(void 0===e)throw new Error("Please pass in `level` to `getSpaces()`");return" ".repeat(3*e)}e.exports=g,e.exports.resetHeaderHandledMessages=function(){f=new WeakSet}},423:e=>{e.exports=function(e){return function(e){var t=document.createElement("div");t.innerHTML=e;var n="";function r(e){if(e.nodeType===Node.TEXT_NODE)n+=e.textContent;else if(e.nodeType===Node.ELEMENT_NODE)for(var t=0;t<e.childNodes.length;t++)r(e.childNodes[t])}return r(t),n.trim()}(function(e){var t=/<a href="([^"]+)"[^>]*>(.*?)<\/a>/.exec(e);if(null===t)return e;var n=t[1],r=t[2],a=e.substr(0,t.index),o=e.substr(t.index+t[0].length);return a+"["+r+"]("+n+")"+o}(e).replace(/<p>|<\/p>|<li>|<\/li>|<th>|<\/th>|<td>|<\/td>/gi,"").replace(/<strong\b[^>]*>/gi,"**").replace(/<\/strong>/gi,"**").replace(/<b\b[^>]*>/gi,"**").replace(/<\/b>/gi,"**").replace(/<em\b[^>]*>/gi,"_").replace(/<\/em>/gi,"_").replace(/<i\b[^>]*>/gi,"_").replace(/<\/i>/gi,"_").replace(/<del\b[^>]*>/gi,"~~").replace(/<\/del>/gi,"~~").replace(/<code\b[^>]*>/gi,"`").replace(/<\/code>/gi,"`"))}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}e=a(746),t=a(763),function(){var n=document.querySelectorAll("[data-message-author-role]");n&&0!==n.length||(n=document.querySelectorAll("[class*='min-h-[20px]']"));var r=t(n);"string"==typeof r&&r.trim().length>0&&(e(console,"md"),console.save(r))}()})();