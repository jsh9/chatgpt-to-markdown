(()=>{var e,t,n={943:e=>{e.exports={replaceQuoteHeadFromEnd:function(e){return e.endsWith("\n> ")?e.slice(0,-3)+"\n":e},makeQuoteHead:function(e){return"\n"+e+"> "},trimAndAddPaddingNewlines:function(e){return e.trim()+"\n"},removeRedundantQuoteHeads:function(e){return e.replaceAll(/(\n> ){3,}/g,"\n> \n> ")}}},961:(e,t,n)=>{var r=n(61);e.exports=function(e){return t=function(e){return e.trim()+"\n"}(function(e){return e.replace(/\n{3,}/g,"\n\n")}(function(e){return e.substring(r().length)}(e))),n=t.split("\n"),a=!1,n.map((function(e){if(e.startsWith("```"))return a=!a,e.trimRight();if(a)return e;var t=e.trimRight();return/^\s*[-*]\s/.test(t)||/^\s*\d+\.\s/.test(t)||/^\s*>/.test(t)?t:t.trimStart()})).join("\n");var t,n,a}},746:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e,n){e.save=function(e){var r="text/plain",a=document.getElementsByTagName("title")[0].innerText,o=a?a.trim().replace(/["]/g,"'").replace(/[\\/:*?"<>|]/g,"-").replace(/\.$/,""):"chatGPT";"json"===n.toLowerCase()?(o+=".json",r="text/json","object"===t(e)&&(e=JSON.stringify(e,void 0,4))):"md"===n.toLowerCase()&&(o+=".md");var i=new Blob([e],{type:r}),l=document.createElement("a");l.download=o,l.href=window.URL.createObjectURL(i),l.dataset.downloadurl=[r,l.download,l.href].join(":");var u=new MouseEvent("click",{canBubble:!0,cancelable:!1,view:window,detail:0,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});l.dispatchEvent(u)}}},61:e=>{e.exports=function(){return"----------\n\n"}},763:(e,t,n)=>{var r=n(794),a=n(961);e.exports=function(e){var t,n="";"function"==typeof r.resetHeaderHandledMessages&&r.resetHeaderHandledMessages();for(var o=0;o<e.length;o++){var i=e[o],l=i;(t=l)&&t.nodeType===Node.ELEMENT_NODE&&void 0!==t.dataset&&"string"==typeof t.dataset.messageAuthorRole&&t.dataset.messageAuthorRole.length>0||(l=i.firstElementChild||i.firstChild),l&&(n+=r(l,0))}return a(n)}},794:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=n(423),c=n(61),s=n(943),f=new WeakSet;function d(e){if(e&&e.dataset&&"string"==typeof e.dataset.messageAuthorRole){var t=e.dataset.messageAuthorRole.toLowerCase();if("user"===t||"assistant"===t)return t}return null}function p(e){return"user"===e?c()+"\n\n# _Question_\n\n":"assistant"===e?"\n\n# _Answer_\n\n":""}function m(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return"";var t=d(e);if(t){if(!f.has(e)){var n=p(t);if(n)return f.add(e),n}return""}var r="string"==typeof e.className?e.className:"",a=null;if("empty:hidden"===r?a="user":r.includes("markdown prose")&&(a="assistant"),!a)return"";var o=function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;if(d(e))return e;if("function"==typeof e.closest){var t=e.closest("[data-message-author-role]");if(t)return t}return null}(e)||e;if(f.has(o))return"";var i=p(a);return i&&f.add(o),i}function g(e,t){var n="";if(e.nodeType===Node.ELEMENT_NODE){n+=m(e);var r=e.childNodes;if("OL"===e.tagName)n+=T(e,t);else if("UL"===e.tagName)n+=b(e,t);else{if(!["P","LI","DIV"].includes(e.tagName))throw new Error("Edge case encountered: node.tagName: ".concat(e.tagName,"\n")+"Please contact the author.");for(var a=0;a<r.length;a++){var o=r[a];if(o.nodeType==Node.TEXT_NODE){var i=o.textContent;if("string"==typeof i){if(!/\r?\n/.test(i)){var l=i.replace(/\u00a0/g," "),u=/^\s/.test(l),s=/\s$/.test(l);if(0===(l=l.trim()).length)continue;u&&(l=" "+l),s&&(l+=" "),n+=l;continue}var f=i.replace(/\u00a0/g," ").split(/\r?\n/).map((function(e){return e.trim()})).join("\n").trim();f.length>0&&(n+=f)}}if(o.nodeType===Node.ELEMENT_NODE){var d=o.tagName,p=!1;h(o)&&(p=!0);var _=p?null:y(o);if(_&&(n+=_.markdown,"display"===_.type&&(n+="\n\n"),p=!0),!p&&["H1","H2","H3","H4","H5","H6"].includes(d)&&(n+=E(o,d),p=!0),!p&&["P","LI","STRONG","EM","DEL","SPAN","B","I","U","S"].includes(d)&&(n+=v(o),p=!0),p||"SUB"!==d&&"SUP"!==d||(n+=o.outerHTML,p=!0),!p&&"TIME"===d){p=!0;continue}p||"BLOCKQUOTE"!==d||(n+=N(o,t),p=!0),p||"OL"!==d||(n+=T(o,t),p=!0),p||"UL"!==d||(n+=b(o,t),p=!0),p||"PRE"!==d||(n+=L(o),p=!0),p||"TABLE"!==d||(n+=w(o),p=!0),p||"CODE"!==d||(n+=x(o),p=!0),p||"HR"!==d||(n+=c(),p=!0),p||(n+=g(o,t)),["CODE","STRONG","EM","DEL","SPAN","SUB","SUP","B","I","U","S"].includes(d)||(n+="\n\n")}}}}return n}function v(e){return u(e.outerHTML)}function h(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;var t=("string"==typeof e.className?e.className:"").split(/\s+/).filter(Boolean);return!(!t.includes("katex-html")&&!t.includes("katex-mathml"))}function y(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;var t=("string"==typeof e.className?e.className:"").split(/\s+/).filter(Boolean),n=t.includes("katex"),r=t.includes("katex-display");if(!n&&!r)return null;var a=e.parentElement,o=Boolean(a&&a.classList&&"function"==typeof a.classList.contains&&a.classList.contains("katex-display"));if(n&&o&&!r)return null;var i=e.querySelector('annotation[encoding="application/x-tex"]');if(!i||"string"!=typeof i.textContent)return null;var l=i.textContent.trim();return 0===l.length?null:r||o?{markdown:"$$\n"+l+"\n$$",type:"display"}:{markdown:"$".concat(l,"$"),type:"inline"}}function E(e,t){var n=parseInt(t.charAt(t.length-1),10),r=function(e){for(var t="",n=0;n<e;n++)t+="#";return t}(n),i=u(e.outerHTML);return i=function(e){for(var t=e.trim(),n=!0,r=[["**","**"],["__","__"],["*","*"],["_","_"]];n;){n=!1;var i,l=o(r);try{for(l.s();!(i=l.n()).done;){var u=a(i.value,2),c=u[0],s=u[1];t.startsWith(c)&&t.endsWith(s)&&t.length>c.length+s.length&&(t=t.slice(c.length,t.length-s.length).trim(),n=!0)}}catch(e){l.e(e)}finally{l.f()}}return t}(i),n>=2&&(i=function(e){var t=null,n=e;for(;t!==n;)t=n,n=n.replace(/\*\*(.*?)\*\*/g,"$1");t=null;for(;t!==n;)t=n,n=n.replace(/__(.*?)__/g,"$1");return n}(i)),r+" "+i}function N(e,t){for(var n="\n",r=_(t),a=s.makeQuoteHead(r),o=e.childNodes,i=0;i<o.length;i++){var l=o[i];"BLOCKQUOTE"===l.tagName?n+=N(l,t):n+="\n"+g(l,t+1)+"\n"}var u=a+s.trimAndAddPaddingNewlines(n).replace(/\n/g,a),c=s.replaceQuoteHeadFromEnd(u);return s.removeRedundantQuoteHeads(c)}function T(e,t){for(var n="\n",r=_(t),a=e.childNodes,o=0;o<a.length;o++){var i=a[o];i.nodeType===Node.ELEMENT_NODE&&"LI"===i.tagName&&(n+="".concat(r).concat(o+e.start,". ").concat(g(i,t+1),"\n"))}return n+"\n"}function b(e,t){for(var n="\n",r=_(t),a=e.childNodes,o=0;o<a.length;o++){var i=a[o];i.nodeType===Node.ELEMENT_NODE&&"LI"===i.tagName&&(n+="".concat(r,"- ").concat(g(i,t+1),"\n"))}return n+"\n"}function L(e){var t,n=e.textContent.split("Copy code"),a=n[0].trim(),i=n[1].trimEnd().split("\n"),l=1/0,u=o(i);try{for(u.s();!(t=u.n()).done;){var c=t.value;if(0!==c.trim().length){var s=c.match(/^\s*/)[0].length;s<l&&(l=s)}}}catch(e){u.e(e)}finally{u.f()}isFinite(l)||(l=0);var f=l>0?i.map((function(e){return e.slice(Math.min(l,e.length))})):i,d=f.map((function(e){return e.match(/^\s*/)[0].length})).filter((function(e){return e>0})),p=f;if(d.length>0){var m=Math.min.apply(Math,r(d));if(m>4&&m%4==0){var g=m/4;p=f.map((function(e){var t=e.match(/^(\s*)(.*)$/),n=t[1].length;return 0===n?t[2]:" ".repeat(Math.round(n/g))+t[2]}))}}var v=p.map((function(e){var t=e.match(/^(\s*)(.*)$/)[2];return/^[-*>]/.test(t)?t:e})),h=v.join("\n");return"```".concat(a,"\n").concat(h,"\n```\n")}function x(e){return"`"+e.textContent+"`"}function w(e){var t="\n";return e.childNodes.forEach((function(e){if(e.nodeType===Node.ELEMENT_NODE&&("THEAD"===e.tagName||"TBODY"===e.tagName)){var n="",r=0;if(e.childNodes.forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE&&"TR"===t.tagName){var a="";t.childNodes.forEach((function(t){t.nodeType!==Node.ELEMENT_NODE||"TD"!==t.tagName&&"TH"!==t.tagName||(a+="| ".concat(u(t.outerHTML)," "),"THEAD"===e.tagName&&r++)})),n+="".concat(a,"|\n")}})),t+=n,"THEAD"===e.tagName){var a="| ".concat(Array(r).fill("---").join(" | ")," |\n");t+=a}}})),t}function _(e){if(void 0===e)throw new Error("Please pass in `level` to `getSpaces()`");return" ".repeat(3*e)}e.exports=g,e.exports.resetHeaderHandledMessages=function(){f=new WeakSet}},423:e=>{function t(e){var t=e.querySelector('annotation[encoding="application/x-tex"]');if(!t||"string"!=typeof t.textContent)return null;var n=t.textContent.trim();return n.length>0?n:null}function n(e,t){return e.classList&&"function"==typeof e.classList.contains&&e.classList.contains(t)}function r(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)&&(!!n(e,"katex-display")||n(e,"katex")&&"block"===e.getAttribute("display"))}e.exports=function(e){return function(e){var a=document.createElement("div");a.innerHTML=e;var o=[];function i(e){if(e.nodeType!==Node.TEXT_NODE){if(e.nodeType===Node.ELEMENT_NODE)if(r(e)){var a=t(e);if(null!==a){var l=function(e){var t=e.parentElement;for(;t;){if("LI"===t.tagName)return"  ";t=t.parentElement}return""}(e);o.push(l+"$$\n"+a+"\n"+l+"$$")}}else if(!function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;for(var t=["katex-html","katex-mathml","katex-svg"],a=0;a<t.length;a++)if(n(e,t[a]))return!0;if(n(e,"katex")){var o=e.parentElement;if(o&&r(o))return!0}return!1}(e))if(function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;if(!n(e,"katex"))return!1;if(r(e))return!1;var t=e.parentElement;if(t&&r(t))return!1;return!0}(e)){var u=t(e);null!==u&&o.push("$".concat(u,"$"))}else if("BR"!==e.tagName)for(var c=0;c<e.childNodes.length;c++)i(e.childNodes[c]);else o.push("\n")}else o.push(e.textContent)}return i(a),o.join("").trim()}(function(e){var t=/<a href="([^"]+)"[^>]*>(.*?)<\/a>/.exec(e);if(null===t)return e;var n=t[1],r=t[2],a=e.substr(0,t.index),o=e.substr(t.index+t[0].length);return a+"["+r+"]("+n+")"+o}(e).replace(/<p>|<\/p>|<li>|<\/li>|<th>|<\/th>|<td>|<\/td>/gi,"").replace(/<strong\b[^>]*>/gi,"**").replace(/<\/strong>/gi,"**").replace(/<b\b[^>]*>/gi,"**").replace(/<\/b>/gi,"**").replace(/<em\b[^>]*>/gi,"_").replace(/<\/em>/gi,"_").replace(/<i\b[^>]*>/gi,"_").replace(/<\/i>/gi,"_").replace(/<del\b[^>]*>/gi,"~~").replace(/<\/del>/gi,"~~").replace(/<code\b[^>]*>/gi,"`").replace(/<\/code>/gi,"`"))}}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e](o,o.exports,a),o.exports}e=a(746),t=a(763),function(){var n=document.querySelectorAll("[data-message-author-role]");n&&0!==n.length||(n=document.querySelectorAll("[class*='min-h-[20px]']"));var r=t(n);"string"==typeof r&&r.trim().length>0&&(e(console,"md"),console.save(r))}()})();